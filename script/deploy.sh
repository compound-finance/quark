#!/bin/bash

set -ex

# TODO: Load contract code directly
# TODO: Private key

PRIVATE_KEY="0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80"
RPC_URL="https://ethforks.io/@bowed-task"

echo "Deploying Quark"
cast send --private-key "$PRIVATE_KEY" --rpc-url "$RPC_URL" --create "0x6101318061000e6000396000f3fe60008054801515908160011461007757501561001757005b610020366100ac565b36828237368255610030366100c8565b90825b828110610063575050508080808080602961004d816100ac565b81610108823982f55af150610061366100e1565b005b8060019160051b8301518282015501610033565b82610081826100ac565b9061008b836100c8565b905b818110610098575050f35b806001809201548160051b8501520161008d565b906040519182156100bf575b8201604052565b606092506100b8565b908160051c91601f198116106100da57565b9060010190565b6100ea906100c8565b600090815b8181106100fc5750508055565b6001018281556100ef56fe60008080808080335af1503d90816040519182156021575b818301604052823ef35b60609250601756"

echo "Deploying Counter"
cast send --private-key "$PRIVATE_KEY" --rpc-url "$RPC_URL" --create "0x608060405234801561001057600080fd5b5060f78061001f6000396000f3fe6080604052348015600f57600080fd5b5060043610603c5760003560e01c80633fb5c1cb1460415780638381f58a146053578063d09de08a14606d575b600080fd5b6051604c3660046083565b600055565b005b605b60005481565b60405190815260200160405180910390f35b6051600080549080607c83609b565b9190505550565b600060208284031215609457600080fd5b5035919050565b60006001820160ba57634e487b7160e01b600052601160045260246000fd5b506001019056fea26469706673582212208fe2d9e04b045477f5760a998d5008e60f9cd79be7197e337e6e8084a1e3f7c664736f6c63430008110033"


# cast call --rpc-url "https://ethforks.io/@bowed-task" "0x97fd63D049089cd70D9D139ccf9338c81372DE68" "number()(uint256)"
# cast send --private-key "0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80" --rpc-url "https://ethforks.io/@bowed-task" "0x5E5713a0d915701F464DEbb66015adD62B2e6AE9" "0x63d09de08a6080527397fd63d049089cd70d9d139ccf9338c81372de68600080806004609c82865af150806004609c82855af150ff"